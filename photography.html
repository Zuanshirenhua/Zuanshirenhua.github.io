<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å…‰å½±é•¿å»Š</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #000;
    }

    .container {
      flex: 1;
      width: 100vw;
      height: 100vh;
      /* perspective: 2000px; */ /* æš‚æ—¶æ³¨é‡Šçœ‹æ•ˆæœ */
      position: relative;
      transition: transform 0.5s ease;
    }

    .container.shifted {
        transform: translateX(3vw); /* ä¸info-panelå±•å¼€çš„å®½åº¦ä¸€åŠä¸€è‡´ */
    }

    .card {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 50vmin;
      height: 70vmin;
      transform-style: preserve-3d;
      transform-origin: center center;
      background-size: cover;
      background-position: center;
      border-radius: 14px;
      box-shadow: 0 0 40px rgba(0, 0, 0, 0.4);
      transition: transform 0.5s ease-in-out;
    }

    .card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 14px;
    }

    .main-wrapper {
        width: 100vw;
        height: 100vh;
        display: flex;
        overflow: hidden;
        position: relative;
    }

    .info-panel {
    width: 0;
    transition: width 0.5s ease;
    background-color: #000;
    color: #fff;
    padding: 40px;
    overflow: hidden;
    white-space: pre-wrap;
    box-sizing: border-box;
    position: relative;
    }

    .glass-overlay {
        filter: url(#glass);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        transform: translateX(100%);
        transition: transform 0.6s ease-out, opacity 0.3s ease;;
        opacity: 0;   
        position: absolute;
        top: 0;
        right: 0;
        width: 60%;
        height: 100%;
        pointer-events: none; /* é˜»æŒ¡ä¸‹é¢å›¾ç‰‡äº¤äº’ */
        border-left: 1px solid rgba(255, 255, 255, 0.2);

        background: linear-gradient(
            135deg,
            rgba(255, 255, 255, 0.2) 0%,
            rgba(255, 255, 255, 0.08) 50%,
            rgba(255, 255, 255, 0.03) 100%
        );
        z-index: 5;
        }
    
        .glass-overlay.show {
        transform: translateX(0%);
        opacity: 1;
        }

        .glass-overlay.hide {
        transform: translateX(100%);
        opacity: 0;
        }

    .info-panel.show {
    width: 40vw;
    }

    .info-panel .text {
    opacity: 0;
    font-size: 1.2rem;
    line-height: 1.6;
    transform: translateX(-30px);
    transition: opacity 0.4s ease, transform 0.4s ease;
    }

    .info-panel.show .text {
    opacity: 1;
    transform: translateX(-30px);
    transition: opacity 0.4s ease, transform 0.4s ease;
    }

    .divider-line {
    position: absolute;
    top: 0;
    left: 40vw; /* ä¸ info-panel å±•å¼€å®½åº¦å¯¹é½ */
    width: 2px;
    height: 0;
    background-color: white;
    z-index: 200;
    transition: height 0.5s ease;
    }

    /* å±•å¼€ï¼šä»ä¸Šå‘ä¸‹æ‹‰ä¼¸ï¼Œè¾ƒæ…¢ */
    .divider-line.expand {
    transition: height 0.6s ease;
    height: 100vh;
    }

    /* æ”¶èµ·ï¼šä»ä¸‹å¾€ä¸Šå¿«é€Ÿæ”¶å› */
    .divider-line.shrink {
    transition: height 0.1s ease;
    height: 0;
    }

    .card.active {
    transition: transform 0.6s ease;
    z-index: 999;
    }

    /* ä¸Šä¸‹å¡ç‰‡é£èµ° */
    .card.fly-up {
    transform: translate(-50%, -100vh) rotateX(-90deg);
    opacity: 0;
    transition: transform 0.6s ease, opacity 0.4s ease;
    }
    .card.fly-down {
    transform: translate(-50%, 200vh) rotateX(90deg);
    opacity: 0;
    transition: transform 0.6s ease, opacity 0.4s ease;
    }

    .glass-title {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: rgba(255, 255, 255, 0.5); /* åŠé€æ˜ç™½å­— */
        font-size: 6rem;
        font-weight: 600;
        text-shadow:
            0 0 4px rgba(255, 255, 255, 0.2),
            0 0 10px rgba(255, 255, 255, 0.1);
        pointer-events: none;
        mix-blend-mode: screen; /* æ¨¡æ‹Ÿæ“¦ç»ç’ƒæ•ˆæœ */
        opacity: 0;
        transition: opacity 0.6s ease;
        }

        .glass-overlay.show .glass-title {
        opacity: 1;
        }

    .exit-button {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: white;
    font-size: 1rem;
    padding: 10px 18px;
    border-radius: 8px;
    cursor: pointer;
    backdrop-filter: blur(8px);
    display: none;
    transition: opacity 0.3s ease;
    }

    .exit-button:hover {
        transform: scale(1.05);
        background: rgba(255, 255, 255, 0.2); /* é¼ æ ‡æ‚¬åœæ—¶ç•¥å¾®äº®ä¸€ç‚¹ */
        }

    .exit-button.show {
    display: block;
    opacity: 1;
    }

    .background-title {
    position: absolute;
    top: 18%;
    left: 22%;
    transform: translate(-50%, -50%) rotate(-30deg);
    font-size: 5vw;
    font-weight: 700;
    color: rgba(255, 255, 255);
    text-shadow: 0 0 6px rgba(0, 0, 0, 0.3);
    white-space: nowrap;
    pointer-events: auto;
    cursor: pointer;
    user-select: none;
    z-index: 70; /* ç¡®ä¿åœ¨å¡ç‰‡ä¸‹æ–¹ */
    white-space: pre-line; /* âœ… æ”¯æŒæ¢è¡Œ */
    text-align: center;     /* âœ… å±…ä¸­å¯¹é½ */
    }

    .letter {
        display: inline-block;
        transition: transform 0.4s ease, opacity 0.4s ease;
        }

    .background-title.hidden {
    opacity: 0;
    transition: opacity 0.5s ease;
    }

  </style>
</head>
<body>
  <div class="main-wrapper">
    <div class="background-title" id="exploding-title">
        <span class="letter-group">@Photography<br>Booth</span>
      </div>
    <div class="info-panel" id="infoPanel">
      <div class="text" id="infoText">è¿™é‡Œæ˜¯æ–‡å­—ä»‹ç»</div>
      <button id="exitButton" class="exit-button">è¿”å›/Close</button>
    </div>
    <div class="glass-overlay">
        <div class="glass-title" id="glassTitle">æ‘„å½±ä¸»é¢˜</div>
    </div>
    <div class="divider-line" id="dividerLine"></div> <!-- ğŸ†• æ·»åŠ  -->
    <div class="container" id="container"></div>
  </div>

  <svg style="position: absolute; width: 0; height: 0">
    <filter
      id="glass"
      x="-50%" y="-50%" width="200%" height="200%" primitiveUnits="objectBoundingBox"
    >
      <feImage x="-50%" y="-50%" width="200%" height="200%" result="map" />
      <feGaussianBlur in="SourceGraphic" stdDeviation="0.001" result="blur" />
      <feDisplacementMap
        in="blur"
        in2="map"
        scale="0.2"
        xChannelSelector="R"
        yChannelSelector="G"
      />
    </filter>
  </svg>

  <script>

    const feImage = document.querySelector("feImage");

    let t = 0;

    function animateFeImage() {
    const yOffset = Math.sin(t) * 0.05; // åœ¨ -0.05 åˆ° +0.05 ä¹‹é—´æµ®åŠ¨
    feImage.setAttribute("y", `${-0.5 + yOffset}`);
    t += 0.02;
    requestAnimationFrame(animateFeImage);
    }

    animateFeImage(); // å¯åŠ¨åŠ¨ç”»

    fetch("https://essykings.github.io/JavaScript/map.png")
        .then(response => response.blob())
        .then(blob => {
        const objURL = URL.createObjectURL(blob);
        feImage.setAttribute("href", objURL);
        });

    const container = document.getElementById("container");
    const titles = [
    "çˆ±ä¸å…‰å½±",
    "å…‰çš„æ—…ç¨‹",
    "å®šæ ¼ç¬é—´",
    "èƒŒæ™¯ä¸–ç•Œ",
    "æŠ½è±¡ä¹‹ç¾"
    ];

    const images = [
      'images/love.jpg',
      'images/light.jpg',
      'images/photography.jpg',
      'images/background.jpg',
      'images/bg.jpg'
    ];
    let current = 2;
    const cards = [];

    images.forEach((src) => {
      const card = document.createElement("div");
      card.className = "card";
      const img = document.createElement("img");
      img.src = src;
      card.appendChild(img);
      container.appendChild(card);
      cards.push(card);
    });

    let lastFlippedCard = null;
    const exitButton = document.getElementById("exitButton");
    const infoPanel = document.getElementById("infoPanel");
    const infoText = document.getElementById("infoText");
    const dividerLine = document.getElementById("dividerLine");
    const glassOverlay = document.querySelector('.glass-overlay');

    function layoutStaticCards() {
    const showingInfo = infoPanel.classList.contains("show");
    if (!showingInfo) {
        exitButton.classList.add("show");
    } else {
        exitButton.classList.remove("show");
    }

    cards.forEach((card, i) => {

        const offset = i - current;

        // é»˜è®¤éšè—
        card.style.visibility = 'hidden';

        // å¦‚æœæ˜¯å½“å‰ã€ä¸­ä¸Šä¸€å¼ æˆ–ä¸‹ä¸€å¼ ï¼Œå°±å±•ç¤º
        if (Math.abs(offset) <= 1) {
        card.style.visibility = 'visible';  // æˆ–æ”¹ç”¨ display: block;
        }


        if (card === lastFlippedCard) {
        // âœ… è®©å®ƒä¿ç•™åŠ¨ç”»ç»“æŸçš„è§’åº¦ï¼Œä½†ç§»åŠ¨ä½ç½®
        if (offset === -1) {
            card.style.transform = 'translate(-50%, calc(-50% - 40vmin)) rotateX(-75deg) scale(0.9)';
            card.style.zIndex = 50;
        } else if (offset === 1) {
            card.style.transform = 'translate(-50%, calc(-50% + 40vmin)) rotateX(-105deg) scale(0.9)';
            card.style.zIndex = 50;
        }
        return;
        }

        if (offset === 0) {
        card.style.transformOrigin = 'center center';
        card.style.transform = 'translate(-50%, -50%) rotateX(0deg) scale(1)';
        card.style.zIndex = 100;
        } else if (offset === -1) {
        card.style.transformOrigin = 'center center';
        card.style.transform = 'translate(-50%, calc(-50% - 40vmin)) rotateX(-75deg) scale(0.9)';
        card.style.zIndex = 10;
        } else if (offset === 1) {
        card.style.transformOrigin = 'center center';
        card.style.transform = 'translate(-50%, calc(-50% + 40vmin)) rotateX(-105deg) scale(0.9)';
        card.style.zIndex = 10;
        } else {
        card.style.transform = 'translate(-50%, -50%) scale(0.3)';
        card.style.zIndex = 1;
        }
    });
    }

    layoutStaticCards();

    let scrolling = false;

    window.addEventListener("wheel", (e) => {
        if (scrolling || infoPanel.classList.contains("show")) return;
        scrolling = true;

        const direction = e.deltaY > 0 ? 'down' : 'up';

        const oldCard = cards[current];
        lastFlippedCard = oldCard;

        if (direction === 'down' && current < images.length - 1) {
            oldCard.style.transform = 'translate(-50%, -50%) rotateX(-75deg) scale(0.9)';
        } else if (direction === 'up' && current > 0) {
            oldCard.style.transform = 'translate(-50%, -50%) rotateX(-105deg) scale(0.9)';
        } else {
            scrolling = false;
            return;
        }

    layoutStaticCards(); // âœ… è¿™é‡Œç°åœ¨ä¸ç­‰äº†


    setTimeout(() => {
        if (direction === 'down') {
            current++;
            } else {
            current--;
            }
        layoutStaticCards();      // ä½ç½®å¸ƒå±€è°ƒæ•´ï¼ˆä¸æ”¹ z-indexï¼‰

        scrolling = false;
        }, 400); // ä¸ CSS ä¸­ transition duration åŒ¹é…
    });




    // å±•å¼€çº¿æ¡
    function showDividerLine() {
    dividerLine.classList.remove("shrink"); // æ¸…é™¤æ—§çŠ¶æ€
    // è§¦å‘å¼ºåˆ¶é‡ç»˜ä»¥ç¡®ä¿ transition åº”ç”¨ï¼ˆé˜²æ­¢åŠ¨ç”»è·³è¿‡ï¼‰
    void dividerLine.offsetWidth;
    dividerLine.classList.add("expand");
    }

    // æ”¶èµ·çº¿æ¡
    function hideDividerLine() {
    dividerLine.classList.remove("expand");
    void dividerLine.offsetWidth;
    dividerLine.classList.add("shrink");
    }

    // ç¤ºä¾‹ä»‹ç»æ–‡æœ¬æ•°ç»„ï¼ˆä¸ images æ•°ç»„ç´¢å¼•å¯¹åº”ï¼‰
    const descriptions = [
    "è¿™æ˜¯ä¸€å¼ å…³äºçˆ±çš„ç…§ç‰‡ã€‚",
    "è¿™æ˜¯ä¸€æŸå…‰çš„æ•æ‰ã€‚",
    "æ•æ‰ç”Ÿæ´»çš„ç¬é—´ã€‚",
    "è¿™æ˜¯æ‘„å½±çš„èƒŒæ™¯ã€‚",
    "è¿™æ˜¯æŠ½è±¡çš„èƒŒæ™¯å›¾ã€‚"
    ];

    // ç‚¹å‡»å½“å‰å¡ç‰‡è§¦å‘å³æ‹‰
    cards.forEach((card, i) => {
    card.addEventListener("click", () => {
        if (i === current) {
        // æ·»åŠ  active æ ·å¼è®©å½“å‰å¡ç‰‡å³ç§»+æ”¾å¤§
        card.classList.add("active");
        card.style.transform = 'translate(-55%, -50%) scale(1.2)';  // ğŸ‘ˆ æ”¾å¤§å¹¶å³ç§»
        document.querySelector('.background-title').classList.add('hidden');

        // å¤„ç†ä¸Šä¸‹å¡ç‰‡é£èµ°
        if (cards[i - 1]) cards[i - 1].classList.add("fly-up");
        if (cards[i + 1]) cards[i + 1].classList.add("fly-down");
              // å³ä¾§ info é¢æ¿ä¸ç»ç’ƒæ•ˆæœ
        infoPanel.classList.add("show");
        container.classList.add("shifted");
        infoText.textContent = descriptions[i];
        glassTitle.textContent = titles[i]; 
        glassOverlay.classList.add("show");
        showDividerLine();
        glassOverlay.style.opacity = '1';
        glassOverlay.style.pointerEvents = 'auto';
        }
    });
    });


    function closeInfoPanel() {
        infoPanel.classList.remove("show");
        container.classList.remove("shifted");
        infoText.classList.remove("show-text");

        glassOverlay.classList.remove("show");
        void glassOverlay.offsetWidth; // å¼ºåˆ¶é‡ç»˜ç¡®ä¿è¿‡æ¸¡
        glassOverlay.classList.add("hide");

        hideDividerLine();

        // é‡ç½®æ‰€æœ‰å¡ç‰‡çŠ¶æ€
        cards.forEach((card) => {
            card.classList.remove("active", "fly-up", "fly-down");
            card.style.transform = ''; // âœ… æ¸…é™¤æ‰‹åŠ¨è®¾ç½®çš„ transform
        });

        // ç­‰åŠ¨ç”»ç»“æŸåå®Œå…¨éšè— glassOverlay
        setTimeout(() => {
            glassOverlay.classList.remove("hide");
            glassOverlay.style.opacity = '0';
            glassOverlay.style.pointerEvents = 'none';
        }, 600); // ä¸ transition æ—¶é—´åŒ¹é…

        layoutStaticCards(); // å›å½’æ­£å¸¸å¸ƒå±€
        }

    glassOverlay.addEventListener("click", () => {
        document.querySelector('.background-title').classList.remove('hidden');
        closeInfoPanel();
    });

    document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
        document.querySelector('.background-title').classList.remove('hidden');
        closeInfoPanel();
        }
    });

    exitButton.addEventListener("click", () => {
        window.location.href = "hobbies.html";  // ğŸ” è·³è½¬ä¸»é¡µ
        });

  </script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
<script>
const title = document.querySelector('#exploding-title .letter-group');
const letters = title.textContent.split('');
title.innerHTML = letters.map(letter => `<span class="letter">${letter}</span>`).join('');
const letterSpans = document.querySelectorAll('.letter');

  const exploding = document.getElementById('exploding-title');

    exploding.addEventListener('mouseenter', () => {
    anime({
        targets: letterSpans,
        translateX: () => anime.random(-100, 100),
        translateY: () => anime.random(-100, 100),
        rotate: () => anime.random(-360, 360),
        opacity: 0.5,
        easing: 'easeOutExpo',
        duration: 800,
        delay: anime.stagger(20),
    });
    });

    exploding.addEventListener('mouseleave', () => {
    anime({
        targets: letterSpans,
        translateX: 0,
        translateY: 0,
        rotate: 0,
        opacity: 1,
        easing: 'easeOutExpo',
        duration: 800,
        delay: anime.stagger(20),
    });
    });
</script>
</body>
</html>